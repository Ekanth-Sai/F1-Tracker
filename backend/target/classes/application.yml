# Purpose:
# - Runs live F1 tracking
# - Polls OpenF1 API for real-time telemetry
# - Stores race and replay data in PostgreSQL
# - Caches live data in redis
# - Communicates with ML services for predictions 

# Environment: 
# - Local / Development Setup ONLY. Not for prod or host
# - Only override this file if there exists application-prod.yml or similar for production

server:
    port: 8080

spring:
    application:
        name: f1-tracker-backend
    
    datasource:
        url: jdbc:postgresql://localhost:5432/f1tracker
        username: f1user
        password: f1pass 
        driver-class-name: org.postgresql.Driver
        hikari:
            maximum-pool-size: 10
            minimum-idle: 5
            connection-timeout: 30000
    
    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: false
        properties:
            hibernate:
            dialect: org.hibernate.dialect.PostgreSQLDialect
            format_sql: true
            jdbc:
                batch_size: 20
    
    data:
        redis:
            host: localhost
            port: 6379
            password:
            lettuce:
                pool:
                    max-active: 8
                    max-idle: 8
                    min-idle: 2

f1:
    openf1:
        base-url: https://api.openf1.org
        poll-interview-ms: 150
        timeout-seconds: 5
    
    ml-service:
        base-url: http://localhost:8001
        timeout-seconds: 5
    
    replay:
        default-speed: 1.0
        max-speed: 10.0
        min-speed: 0.5
        frame-interval-ms: 50

logging:
    level:
        com.firetracker: INFO
        org.springframework: WARN
        org.hibernate: WARN